<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Diamond Play</title>
<style>
  /* --- Basic Reset --- */
  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color: white;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
  }

  /* --- Top Bar --- */
  header {
    display: flex;
    align-items: center;
    padding: 15px 20px;
    background: rgba(0,0,0,0.2);
    backdrop-filter: blur(10px);
  }

  header img {
    height:40px;
    width:40px;
    margin-right: 15px;
  }

  header h1 {
    font-size: 22px;
    font-weight: bold;
  }

  /* --- Body --- */
  .content {
    flex:1;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    padding: 20px;
    text-align:center;
  }

  .box {
    background: rgba(255,255,255,0.1);
    padding: 25px;
    border-radius: 15px;
    backdrop-filter: blur(10px);
    width:90%;
    max-width:400px;
    margin-bottom:20px;
  }

  input {
    padding:10px;
    width:90%;
    border-radius:6px;
    border:none;
    margin-top:10px;
  }

  /* --- Bottom Nav --- */
  .bottom-nav {
    width:100%;
    padding:15px 20px;
    background: rgba(0,0,0,0.25);
    backdrop-filter: blur(10px);
    display:flex;
    justify-content:center;
    position: fixed;
    bottom:0;
    left:0;
  }

  .google-btn {
    padding:12px 20px;
    background:white;
    color:black;
    font-weight:bold;
    border:none;
    border-radius:8px;
    width:90%;
    max-width:400px;
    cursor:pointer;
  }

  .hidden { display:none; }

</style>
</head>
<body>

<!-- Top Bar -->
<header>
  <img src="https://i.ibb.co/1rq2Zf6/diamond-icon.png" alt="Diamond Icon">
  <h1>Diamond Play</h1>
</header>

<!-- Content Area -->
<div class="content">

  <!-- LOGIN PAGE -->
  <div id="loginPage">
    <p>Welcome to Diamond Play! Earn diamonds by completing tasks and referrals.</p>
  </div>

  <!-- REFERRAL PAGE -->
  <div class="box hidden" id="referralPage">
    <h2>Have a Referral Code?</h2>
    <input type="text" id="refCode" placeholder="Enter referral code">
    <br>
    <button onclick="goHome()">Continue</button>
  </div>

  <!-- HOME PAGE -->
  <div class="box hidden" id="homePage">
    <h2>Welcome, <span id="userName"></span> ðŸ’Ž</h2>
    <p>Diamonds: <span id="diamonds">0</span></p>
    <button onclick="logoutUser()">Logout</button>
  </div>

</div>

<!-- Bottom Navigation -->
<div class="bottom-nav" id="loginNav">
  <button class="google-btn" onclick="googleLogin()">Sign in with Google</button>
</div>

<!-- Firebase + Google Login -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithRedirect, getRedirectResult, signOut } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";

// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyABMbaOFqrDza62GH03uY8J3cxsguaNCXo",
  authDomain: "diamondplay-58ba1.firebaseapp.com",
  projectId: "diamondplay-58ba1",
  storageBucket: "diamondplay-58ba1.firebasestorage.app",
  messagingSenderId: "710600063172",
  appId: "1:710600063172:web:bcbef31cad5632f197f191",
  measurementId: "G-H8JB05JC7E"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

// Google Login (Redirect)
window.googleLogin = function(){
  signInWithRedirect(auth, provider);
}

// Handle Redirect Result
getRedirectResult(auth)
.then((result)=>{
  if(result?.user){
    const user = result.user;
    localStorage.setItem("diamondUser", user.displayName);
    document.getElementById("loginPage").classList.add("hidden");
    document.getElementById("loginNav").classList.add("hidden");
    document.getElementById("referralPage").classList.remove("hidden");
  }
})
.catch((err)=>{ console.log(err); });

// Referral â†’ Home
window.goHome = function(){
  let code = document.getElementById("refCode").value;
  if(code!="") alert("Referral added! +50 Diamonds");
  localStorage.setItem("diamonds", code!=""?50:0);
  document.getElementById("referralPage").classList.add("hidden");
  document.getElementById("homePage").classList.remove("hidden");
  document.getElementById("userName").innerText = localStorage.getItem("diamondUser");
  document.getElementById("diamonds").innerText = localStorage.getItem("diamonds");
}

// Logout
window.logoutUser = function(){
  signOut(auth).then(()=>{
    localStorage.clear();
    document.getElementById("homePage").classList.add("hidden");
    document.getElementById("loginPage").classList.remove("hidden");
    document.getElementById("loginNav").classList.remove("hidden");
  });
}
</script>

</body>
</html>
